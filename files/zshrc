#############################################
# .zshrc                                    #
# Gets sourced at every terminal session    #
# Uses global env vars defined in .zshenv   #
#############################################

# Ansible managed file - do not edit manually

# Load Antidote plugins
if [ -f "$HOME/.antidote/antidote.zsh" ]; then
  source "$HOME/.antidote/antidote.zsh"
  antidote load
fi

autoload -U compinit && compinit
autoload -U colors && colors

# History
HISTSIZE=10000
HISTFILE=~/.zsh_history
SAVEHIST=$HISTSIZE
HISTDUP=erase
setopt appendhistory
setopt sharehistory
setopt hist_ignore_space
setopt hist_ignore_all_dups
setopt hist_save_no_dups
setopt hist_ignore_dups
setopt hist_find_no_dups

# Keybindings
bindkey -v
bindkey '^p' history-search-backward
bindkey '^n' history-search-forward

# Run all custom zsh scripts
for file in $HOME/.config/zsh/*.zsh; do
  source "$file"
done

# Initialize oh-my-posh
eval "$(oh-my-posh init zsh --config $HOME/.config/oh-my-posh/config.toml)"

# Run fastfetch if installed
[ $(command -v fastfetch) ] && fastfetch
